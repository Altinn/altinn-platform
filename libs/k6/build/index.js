var x=Object.create;var c=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var i=(e,t)=>()=>(e&&(t=e(e=0)),t);var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),N=(e,t)=>{for(var s in t)c(e,s,{get:t[s],enumerable:!0})},u=(e,t,s,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of y(t))!A.call(e,r)&&r!==s&&c(e,r,{get:()=>t[r],enumerable:!(o=S(t,r))||o.enumerable});return e};var l=(e,t,s)=>(s=e!=null?x(R(e)):{},u(t||!e||!e.__esModule?c(s,"default",{value:e,enumerable:!0}):s,e)),T=e=>u(c({},"__esModule",{value:!0}),e);function p(){return{attachments:[{color:"#632eb8",blocks:[{type:"section",text:{type:"mrkdwn",text:"*|K6 Report Summary*"}},{type:"section",text:{type:"mrkdwn",text:""},accessory:{type:"image",image_url:"https://k6.io/images/landscape-icon.png",alt_text:"k6 thumbnail"}},{type:"divider"},{type:"actions",elements:[{type:"button",text:{type:"plain_text",text:"Grafana :grafana:",emoji:!0},value:"click_me_123",url:""}]}]}]}}var m=i(()=>{});var L,_=i(()=>{L={grafanaBaseUrl:__ENV.GRAFANA_BASE_URL??"https://altinn-grafana-test-b2b8dpdkcvfuhfd3.eno.grafana.azure.com",k6PrometheusDashboard:__ENV.K6_PROMETHEUS_DASHBOARD??"d/ccbb2351-2ae2-462f-ae0e-f2c893ad1028/k6-prometheus",datasource:__ENV.DATASOURCE??"k6tests-amw"}});var k=v(d=>{var h=l(require("k6/http"));m();_();function f(e){let t=e.metrics.http_reqs.values.count,s=e.metrics.http_reqs.values.rate.toFixed(2),o=e.metrics.http_req_duration.values.avg.toFixed(2),r=e.metrics.http_req_duration.values["p(95)"].toFixed(2),a=e.metrics.http_req_duration.values["p(99)"].toFixed(2);return`*Number of Requests:* ${t} reqs
*Max Throughput:* ${s} reqs/s
*Average Response Time:* ${o} ms
*p(95) Response Time:* ${r} ms
*p(99) Response Time:* ${a} ms`}function O(e){let t=e.root_group.checks.length,s="",o=e.root_group.checks;for(let r=0;r<t;r++){let a=o[r].passes,E=o[r].passes+o[r].fails,b=a/E*100;s+=`*Check*: '${o[r].name}' had a Success Rate of: ${b}%
`}return s}function C(e,t){var s=p();let o=s.attachments.find(r=>r.blocks[1].type==="section");switch(t){case"performance":o.blocks[1].text.text=f(e);break;case"checks":o.blocks[1].text.text=O(e);break;default:o.blocks[1].text.text=f(e)}return o.blocks[3].elements[0].url=`${void 0}/${void 0}?orgId=1&var-DS_PROMETHEUS=${void 0}&var-namespace=${__ENV.NAMESPACE}&var-testid=${__ENV.TESTID}&from=${__ENV.MANIFEST_GENERATION_TIMESTAMP}&to=${new Date().getTime()}`,s}function K(){return{headers:{Authorization:"Bearer "+__ENV.SLACK_TOKEN,"Content-type":"application/json"}}}function $(e,t="performance"){if(!__ENV.SLACK_WEBHOOK_URL){console.error("SLACK_WEBHOOK_URL environment variable is not defined");return}if(!__ENV.SLACK_TOKEN){console.error("SLACK_TOKEN environment variable is not defined");return}let s=K();var o=C(e,t);let r=JSON.stringify(o);try{let a=h.default.post(__ENV.SLACK_WEBHOOK_URL,r,s);a.status!=200&&console.error("Could not send summary, got status "+a.status)}catch(a){console.error("Error sending Slack message:",a)}}d.postSlackMessage=$});var D={};N(D,{slack:()=>g.slack});module.exports=T(D);var g=l(k());
//# sourceMappingURL=index.js.map
