FROM k6-action-image:test
COPY --from=golang:1.26-alpine@sha256:d4c4845f5d60c6a974c6000ce58ae079328d03ab7f721a0734277e69905473e5 /usr/local/go/ /usr/local/go/
ENV PATH="/usr/local/go/bin:${PATH}"

COPY actions/generate-k6-manifests /actions/generate-k6-manifests
WORKDIR /actions/generate-k6-manifests
RUN go mod download
RUN go test -v ./...
