FROM k6-action-image:test
COPY --from=golang:1.25-alpine@sha256:f6751d823c26342f9506c03797d2527668d095b0a15f1862cddb4d927a7a4ced /usr/local/go/ /usr/local/go/
ENV PATH="/usr/local/go/bin:${PATH}"

COPY actions/generate-k6-manifests /actions/generate-k6-manifests
WORKDIR /actions/generate-k6-manifests
RUN go mod download
RUN go test -v ./...
